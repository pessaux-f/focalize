#**********************************************************************#
#                                                                      #
#                        FoCaLize compiler                             #
#                                                                      #
#            François Pessaux                                          #
#            Pierre Weis                                               #
#            Damien Doligez                                            #
#                                                                      #
#                               LIP6  --  INRIA Rocquencourt           #
#                                                                      #
#  Copyright 2008 LIP6 and INRIA                                       #
#  Distributed only by permission.                                     #
#                                                                      #
#**********************************************************************#

# $Id: Makefile.config,v 1.5 2008-12-03 19:04:48 weis Exp $

# General commands
CD = cd
LN = ln -sf
CP = cp
MKDIR = mkdir -p

# Software configuration variables.
include $(ROOT_DIR)/.config_var

# The list of tar balls for external tools that are MANDATORY for focalize to
# work properly. We must provide almost all their transitive closure :(

# The first step of the installation process is to untar, compile and install
# all those tools.
TAR_BALLS_DIR_NAME = tarballs
TAR_BALLS_DIR = $(ROOT_DIR)/$(TAR_BALLS_DIR_NAME)

# For each tool, we define its sub-directory, its tar ball file name,
# its configuration options, and make all target.

# The Caml compiler
CAML_DIR = ocaml-3.10.2
CAML_TAR_BALL = $(CAML_DIR).tar.gz
CAML_CONFIGURE_OPTIONS = -prefix $(PREFIX)
CAML_MAKE_ALL_TARGET = world.opt

# The Caml pre-processor
CAMLP5_DIR = camlp5-5.09
CAMLP5_TAR_BALL = $(CAMLP5_DIR).tgz
CAMLP5_CONFIGURE_OPTIONS = -transitional -prefix $(PREFIX)
CAMLP5_MAKE_ALL_TARGET = world.opt

# The Coq proof assistant
COQ_DIR = coq-8.1pl4
COQ_TAR_BALL = $(COQ_DIR).tar.gz
COQ_CONFIGURE_OPTIONS = -prefix $(PREFIX) -camldir $(ABSOLUTE_ROOT_DIR)/$(CAML_DIR) \
-camlp5dir $(ABSOLUTE_ROOT_DIR)/$(CAMLP5_DIR)
COQ_MAKE_ALL_TARGET = world.opt

# Convenient abbrevs for all external tools stuff.
EXTERNAL_TOOLS_TAR_BALLS = $(CAML_TAR_BALL) $(CAMLP5_TAR_BALL) $(COQ_TAR_BALL)
EXTERNAL_TOOLS_DIRS = $(ROOT_DIR)/$(CAML_DIR) $(ROOT_DIR)/$(CAMLP5_DIR) $(ROOT_DIR)/$(COQ_DIR)
