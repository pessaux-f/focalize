#!/bin/sh

#  Copyright 2004 INRIA
#  $Id: configure,v 1.6 2005-07-01 12:26:22 prevosto Exp $

bindir=/usr/local/bin
libdir=/usr/local/lib/foc
debug=false

case `hostname` in
  macaque*) debug=true;;
esac

while : ; do
  case $# in 0) break;; esac
  case "$1" in
    -bindir | --bindir)
       bindir=$2
       shift 2
    ;;
    -libdir | --libdir)
       libdir=$2
       shift 2
    ;;
    -debug | --debug)
       debug=true
       shift
    ;;
    --with-xmlrpc)
        xmlrpc=true
        shift
    ;;
    *) echo 'usage: ./configure [-bindir <dir>] [-libdir <dir>]' >&2
       exit 2
    ;;
  esac
done

if $debug; then
  debugflags="-g -dtypes"
else
  debugflags=
fi

if $xmlrpc; then
    xmlrpcflags=`ocamlfind query -r -i-format xmlrpc | tr '\n' ' '`;
    xmlrpcfile="xmlrpc";
    xmlrpclink=`ocamlfind query -r -predicates byte -a-format xmlrpc | tr '\n' ' '`;
else
    xmlrpcflags=;
    xmlrpcfile=;
    xmlrpclink=;
fi
{
  echo BINDIR="$bindir"
  echo LIBDIR="$libdir"
  echo DEBUGFLAGS="$debugflags"
  echo XMLRPCFILE="$xmlrpcfile"
  echo XMLRPCFLAGS="$xmlrpcflags"
  echo XMLRPCFILE="$xmlrpcfile"
  echo XMLRPCLINK="$xmlrpclink"
} >.config_var

echo Configuration summary for zvtov:
cat .config_var
