#**********************************************************************#
#                                                                      #
#                        FoCaLize compiler                             #
#                                                                      #
#            Fran√ßois Pessaux                                          #
#            Pierre Weis                                               #
#            Damien Doligez                                            #
#                                                                      #
#                               LIP6  --  INRIA Rocquencourt           #
#                                                                      #
#  Copyright 2008 LIP6 and INRIA                                       #
#  Distributed only by permission.                                     #
#                                                                      #
#**********************************************************************#

# $Id: Makefile.config,v 1.34 2009-04-03 15:50:36 doligez Exp $

# Reading software configuration variables.
include $(ROOT_DIR)/.config_var

# Where we store ready to use documentation files.
DOC_ROOT_DIR=$(ROOT_DIR)/doc

# Basic Unix commands
CD = cd
CP = cp -f
LN = ln -sf
MAKE = make
MKDIR = mkdir -p
RM = rm -rf
TARC = tar cvzf
TARX = tar xvzf

# The compilers

# Tex related processors
LATEX = latex
MAKEINDEX = makeindex
DVIPS = dvips
DVIPDF = dvipdf

# Htmlc compiler
HTMLC_COMPILER = htmlc
HTMLC_COMP_FLAGS =
HTMLC_INCLUDES =

HTMLC = $(HTMLC_COMPILER) $(HTMLC_COMP_FLAGS) $(HTMLC_INCLUDES)

# Caml compiler commands bound at configuration time in .config_var.
# CAML_BYT_COMPILER = ocamlc
# CAML_BIN_COMPILER = ocamlopt
# CAML_DOC_COMPILER = ocamldoc

# Caml compilers flags
CAML_COMP_FLAGS = -w A -warn-error Ae -dtypes
CAML_BYT_COMP_FLAGS = $(CAML_COMP_FLAGS) -g
CAML_BIN_COMP_FLAGS = $(CAML_COMP_FLAGS)

# Caml libraries includes for compilation, linking, and dependancy computation.
CAML_INCLUDES =

# The Caml byte and bin compiler definitions.
CAML_BYT = $(CAML_BYT_COMPILER) $(CAML_INCLUDES) $(CAML_BYT_COMP_FLAGS)
CAML_BIN = $(CAML_BIN_COMPILER) $(CAML_INCLUDES) $(CAML_BIN_COMP_FLAGS)

# Other Caml related commands
# CAML_???_COMPILER commands are bound at configuration time and stored in .config_var.
CAML_DOC = $(CAML_DOC_COMPILER)
CAML_YAC = $(CAML_YAC_COMPILER) -v
CAML_LEX = $(CAML_LEX_COMPILER)
CAML_DEP = $(CAML_DEP_COMPILER) $(CAML_INCLUDES)

# The focalize compiler command
LINK_TO_FOCALIZE_COMPILER = $(ROOT_DIR)/toplevel/focalizec
# The byt compiled focalize compiler
BYT_FOCALIZE_COMPILER = $(LINK_TO_FOCALIZE_COMPILER).byt
# The binary compiled focalize compiler
BIN_FOCALIZE_COMPILER = $(BYT_FOCALIZE_COMPILER:.byt=.bin)
# The regular focalize compiler command
FOCALIZE_COMPILER = $(LINK_TO_FOCALIZE_COMPILER)

# The focalize compiler flags
FOCALIZE_COMP_FLAGS =

# The focalize compiler definition
FOCALIZEC = $(FOCALIZE_COMPILER) $(FOCALIZE_COMP_FLAGS)

# The Coq compiler command bound at configuration time in .config_var.
# COQ_COMPILER = coqc

# The Coq compiler flags
COQ_COMP_FLAGS =

# The Coq libraries includes for compilation.
# COQ_INCLUDES = -I $(ROOT_DIR)/../zenon/
# From .config_var ZENON_LIB_DIR
# Was ZENON_LIB_DIR = $(ROOT_DIR)/../zenon/

COQ_INCLUDES = -I $(ZENON_LIB_DIR)

# The Coq compiler definition
COQC = $(COQ_COMPILER) $(COQ_INCLUDES) $(COQ_COMP_FLAGS)

# The Zenon compiler command is bound at configuration time in .config_var.
# ZENON_COMPILER = $(ROOT_DIR)/../zenon/zenon

# The Zenon compiler flags
ZENON_COMP_FLAGS =

# The zenon compiler definition. (Only for completeness).
# Note: we do not directly use $(ZENON) in focalize:
# we use $(ZVTOV) instead, with options to call zenon with the appropriate options.
ZENON = $(ZENON_COMPILER) $(ZENON_COMP_FLAGS)

# The Zvtov compiler is bound at configuration time in .config_var.
# ZVTOV_COMPILER = $(ROOT_DIR)/../zvtov/zvtov

# The Zvtov compiler flags
ZVTOV_COMP_FLAGS = -zenon $(ZENON_COMPILER) -new

# The Zvtov compiler definition
ZVTOV = $(ZVTOV_COMPILER) $(ZVTOV_COMP_FLAGS)

# An XSLT processor
XSLTPROC = xsltproc

# Stylesheet for generation MathML Content
FD2HTML = $(ROOT_DIR)/src/docgen/focdoc2html.xsl

# Stylesheet for converting MathML Content to Presentation
MMLC2P =  $(ROOT_DIR)/src/docgen/mmlctop2_0.xsl
