#!/bin/sh

#**********************************************************************#
#                                                                      #
#                        FoCaLize compiler                             #
#                                                                      #
#            François Pessaux                                          #
#            Pierre Weis                                               #
#            Damien Doligez                                            #
#                                                                      #
#                               LIP6  --  INRIA Rocquencourt           #
#                                                                      #
#  Copyright 2008 INRIA                                                #
#  Distributed only by permission.                                     #
#                                                                      #
#**********************************************************************#

#  $Id: .configure,v 1.1 2008-12-01 19:08:21 weis Exp $

# The file .config_var has been built by configure. We load it.
. .config_var

SUB_DIRS="basement parser typing \
  docgen commoncodegen mlcodegen coqcodegen \
  toplevel \
  refman \
  stdlib \
  extlib extlib/algebra extlib/access_control \
  contribs"

# Touching .depend files to oblige make to redo dependancies
touch .depend

for i in $SUB_DIRS ; do
  (\cd $i; touch .depend; mkdir -p odoc)
done

# Generate the installation related source file.
rm -rf basement/installation.ml
echo "(* This file is automatically generated by configure. Do not manually edit. *)" \
     > basement/installation.ml
echo "let install_bin_dir = \"$BIN_DIR\" ;;" >> basement/installation.ml
echo "let install_lib_dir = \"$LIB_DIR\" ;;" >> basement/installation.ml
echo "(* End of generated source file. *)" >> basement/installation.ml
chmod a-w basement/installation.ml

# Building dependancy files
make depend
