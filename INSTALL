#**********************************************************************#
#                                                                      #
#                        FoCaLiZe compiler                             #
#                                                                      #
#            François Pessaux                                          #
#            Pierre Weis                                               #
#            Damien Doligez                                            #
#                                                                      #
#                               LIP6  --  INRIA Rocquencourt           #
#                                                                      #
#  Copyright 2008 INRIA                                                #
#  Distributed only by permission.                                     #
#                                                                      #
#**********************************************************************#

#  $Id: INSTALL,v 1.14 2010-05-06 14:21:01 weis Exp $

(0) Installation:
=================

The installation of the FoCaLiZe system requires the installation of some
tools external to FoCaLiZe with versions carefully chosen to fit with the
FoCaLiZe system.

These tools must be installed in your home directory, for various reasons out
of scope of this installation short notice.

The default directory for the installation of external tools is the directory
pkg in your home directory.

Thus, if the directory pkg does not exist yet, please create it by typing:

  mkdir ~/pkg

Now, you are ready to compile and install FoCaLiZe, using the standard stanza:
  ./configure
  make
  make install

Since the second step needs a lot of compilation, expect it to take some time
(up to one hour or so for a reasonably modern machine). 

If you want to tune the installation process or inderstand how it runs, you
may have a look below.

(1) Administrativia:
====================

Licence: New BSD Licence (see the file LICENSE for details)
-------

Contacts:
---------
- Web site: http://focalize.inria.fr/
- Discussion: focalize-users@inria.fr
- Bug reports for installation: Pierre.Weis@inria.fr
- Bug reports for the compiler: http://focalize.inria.fr/
  (Find and click on the ``Bug Tracking'' link)
- Contact developers: focalize-devel@inria.fr

(2) In case of trouble:
=======================

If the default configuration settings do not please you, you may use more
suitable configuration options.

If you want to run the configuration script interactively, use:

./configure -interactive

If you already know what you are doing, you can fix the external tools
installation directory with:

./configure -tools_prefix <directory>

or independently fix the tools and project installation directories with:

./configure -tools_prefix <directory> -prefix <directory>

For even finer configuration, get more information from the script with:

./configure -help | more

or see below to understand the configuration process.

(3) The installation process in brief:
======================================

The FoCaLiZe installation is a three steps process: configuration, building (run "make") and installation of executables and
documentation (run "make install").

The installation process needs two places where to permanently install files:

(1) a directory writable during the configuration and building phase,

(2) a directory writable during the installation phase.

Directory (1) is typically ~/pkg (hence writable by you).
Directory (2) is typically /usr/local (hence only writable by root).

Directory (1) is the argument of the -tools_prefix option of configure.
Directory (2) is the argument of the -prefix option of configure.

In directory (1), the building phase builds and installs three external
systems: Objective Caml, CamlP5 and the Coq system. Internal tools, zenon and
zvtov, will also install there.

In directory (2) the installation phase installs the focalizec compiler, its
library and documentation.

All the tools in directory (1) and (2) are mandatory to use the FoCaLize system.

(4) Some details on the installation process:
=============================================

The software will compile and install in three tasks in turn:

 (1) Configuration.

 (2) - Compilation and installation of mandatory externals tools:
       Ocaml, Camlp5, and Coq.
     - Compilation and installation of internal tools: zenon and zvtov.
     - Compilation of the compiler focalizec and its libraries.

 (3) Installation of the compiler: focalizec.

The command "./configure ~/pkg" performs task (1).
The command "make" performs task (2).
The command "make install" performs task (3): it installs the compiler, its
libraries, and the documentation.

External and internal tools are installed in the file system in a directory
private to the actual version of the focalizec compiler. Default directory is
sub directory "focalize-0.6.0" in the directory "~/pkg"; you can change this
behavior during step 1, by calling "./configure <directory>".
For instance, if you want to install the external tools in the directory
"/usr/local/focalize-0.6.0", configure using:

./configure "/usr/local"

(5) After the installation:
===========================

For checking the proofs with coqc, you need to add this to your $HOME/.coqrc file:
  Add LoadPath $TOOLS_INSTALL_DIR/lib.
  Add LoadPath $TOOLS_INSTALL_DIR/lib/zenon.

The default $TOOLS_INSTALL_DIR is "/usr/local/lib/focalize-0.6.0"; If you specified
an alternate --tools_installation_prefix when configuring FoCaLiZe, you need
to adjust these paths accordingly.

(6) Optional prerequisites:
===========================

 - ImageMagick (optional)
 - Ghostscript (optional)
